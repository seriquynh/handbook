A User in Linux system has a unique ID.

- A User ID is a unique positive integer assigned by a Unix-like OS to a specific user. User name is only used for humans.
- In the Linux kernel 2.4 and older, UIDs are unsigned 32-bit integers that can be from 0 to 4,294,967,296.
- User root has UID is 0 (zero).
- UID and sone other information of a user is stored in `/etc/passwd` file.
- Normal users: Some Linux distributions use UIDs for non-privileged users starts at 100. Others, such as Red Hat, starts at 500, and still others, such Debian/CentOS, starts at 1000.

- UID and GID details can be found at `/etc/login.defs`. Here are id range of user, system user, group and system group.

```bash
UID_MIN 1000
UID_MAX 60000

SYS_UID_MIN 100
SYS_UID_MAX 999

GID_MIN 1000
GID_MAX 60000

SYS_GID_MIN 100
SYS_GID_MAX 999
```

- The default information of a local user when it's created stored in `/etc/default/useradd`:

```bash
useradd -D
cat /etc/default/useradd
```

- To know the supported shells in the system:

```bash
cat /etc/shells
```

- `/etc/skel` contains files and directories that is copied to user home directory when it's created.cat

| File | Description |
|------|-------------|
| /etc/profile | Startup file for all users, exec with login shell (run automatically when login).
| ~/.bash_profile | Startup file for specific user, exec with login shell.
| ~/.bash_login |
| ~/.profile |
| ~/.bash_logout | Run when user logout shell session.
| /etc/bash.bashrc |
| ~/.bashrc |

/etc/profile is always loaded.

When a user login:

- ~/.bash_profile is loaded if it exists.
- ~/.bash_login is loaded if it exists and ~/.bash_profile doesn't exist.
- ~/.profile is loaded if it exists and ~/.bash_login doesn't exist.
- [Login Shell Session]
- ~/.bash_logout is loaded if it exists.

**/etc/passwd**

```bash
seriquynh:x:1001:1001:Quynh Nguyen,,,:/home/seriquynh:/bin/bash
# User info components are separated by : character.
# 1. Username: seriquynh
# 2. Password: x character indicates that an encrypted password of user is stored in /etc/shadow
# 3. UID: 1001 is the user id.
# 4. GID: 1001 is the primary group id.
# 5. Description (GECOS field): Free text that describes something about user.
# 6. Home directory: /home/seriquynh
# 7. Command/shell: The absolute path of command or shell.
```

**/etc/shadow**

```bash
seriquynh:$6$sKeX.ZMv$JeklLgcC3TLYiyQhNU9rTShhYsHOTdl5QUxAN0JHPmjBXHTvy53liE2ucZjtMiPKr9MudAEQ4xhS0LnnM1p0Y0:18691:0:99999:7:::
# Password info components are separated by : character.
# 1. Username: seriquynh
# 2. Encrypted Password.
# 3. Last password change: Days since Jan 1st, 1970 when the password is last changed.
# 4. Minimum: 0 days required between two password change moments. If it's 3, the next password change must be 3 days after the last password change.
# 5. Maximum: 99999 days that password is valid. After that, user has to change his/her password.
# 6. Warning: 7 days before password expires, system will warn user to change his/her password.
# 7. Inactive: After n password expires days, user will be disabled.
# 8. Disabled: until days since Jan 1st, 1970, user is disabled.
```
Encrypted password has format $id$salt$hashed
$id$ = $1$ means MD5 
$id$ = $2a$ means Blowfish
$id$ = $2y$ means Blowfish
$id$ = $5$ means SHA-256
$id$ = $6$ means SHA-512

### adduser process
1. A new line is added to /etc/passwd.
2. A new line is added to /etc/shadow.
3. A new line is added to /etc/group.
4. A new line is added to /etc/gshadow
5. A new user home directory is created inside /home directory, items are copied from /etc/skel

